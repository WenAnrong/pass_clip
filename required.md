# 账号密码管理APP（Flutter版）制作要求

======================================================================

需求确认：基于Flutter开发本地存储型账号密码管理APP，无网络同步功能，核心能力包括4/6位数字密码+系统级生物识别登录、底部三栏导航、本地数据导出/导入、账号密码分类管理，以下为全量制作细节，供开发直接落地。

======================================================================

## 一、整体开发流程与核心架构

### 1. 开发优先级

1) 基础框架搭建（Flutter工程+依赖引入+权限配置）

2) 登录/初始化模块（密码设置+生物识别）

3) 底部导航栏+页面骨架

4) 首页（分类+账号列表）

5) 新增/编辑账号密码模块

6) “我的”页面（密码修改/导出导入等功能）

7) 数据加密存储+兼容性测试

8) UI/交互优化

### 2. 核心业务流程

首次启动 → 引导设置4/6位数字密码 → 加密保存至本地 → 后续启动进入登录界面

登录界面 → 可选数字密码登录/生物识别登录 → 验证通过进入主界面（底部三栏导航）

主界面 → 可切换至首页（分类筛选+账号列表）/新增页面（表单填写）/我的页面（功能设置）

## 二、功能模块详细制作要求

### 模块1：初始化与登录（核心入口）

#### 1.1 首次启动-密码设置

交互流程：

- 启动后展示“设置解锁密码”页面，标题+说明文字：“请设置4/6位纯数字解锁密码，保护你的账号安全”

- 输入框限制：仅允许输入数字，强制校验长度为4位或6位，输入过程中实时提示“请输入4/6位数字”

- 二次确认：首次输入完成后，跳转至二次输入页面，两次输入不一致弹窗提示“两次密码不一致，请重新输入”，并返回首次输入页面

- 完成后：弹窗提示“密码设置成功”，自动跳转至主界面

技术要求：密码需通过AES加密处理，存储至flutter_secure_storage，禁止明文或普通SharedPreferences存储

#### 1.2 非首次启动-登录界面

界面布局：

- 顶部：展示APP logo及名称

- 中间：自定义4/6位数字键盘（替代系统键盘）+ 密码输入框（输入内容显示为●●●●/●●●●●●）

- 下方：“使用指纹/面容登录”按钮（搭配对应图标，设备不支持生物识别则隐藏该按钮）

- 底部：“忘记密码？”文字链接，点击后弹窗提示“重置密码将清空所有数据，是否确认？”，确认后清除本地所有数据，跳转至密码设置页面

登录规则：

- 数字密码错误：累计5次错误后，账号锁定5分钟，界面显示“密码错误次数过多，5分钟后重试”，期间禁止再次输入

- 生物识别：调用local_auth库，适配Android（需申请BIOMETRIC权限）和iOS（FaceID/TouchID），识别成功直接登录，识别失败回退至密码登录界面，提示“识别失败，请重试或使用密码登录”

- 登录状态：登录成功后，通过shared_preferences保存登录状态，APP后台运行、重新打开时无需重复登录；仅手动退出登录、修改解锁密码后，登录状态失效，再次启动需重新验证

### 模块2：底部导航栏（BottomNavigationBar）

布局与样式：

左侧-首页：图标建议用Icons.home，点击切换至首页（账号列表+分类筛选页面），选中状态下图标、文字高亮（主色调），未选中为灰色

中间-新增：图标建议用Icons.add_circle，采用圆形突出样式，尺寸比两侧按钮大1.2倍，点击后弹出“新增账号密码”表单弹窗（或跳转至新增页面），点击时有按压动效（缩放+颜色变化）

右侧-我的：图标建议用Icons.person，点击切换至“我的”页面（功能设置页面），选中状态高亮，未选中为灰色

交互要求：点击切换页面时，保留各页面原有状态（如首页的分类筛选条件、输入框内容等），不重置页面数据

### 模块3：首页（账号密码列表+分类管理）

#### 3.1 顶部区域

- 搜索栏：支持按“平台名称、账号、分类”模糊搜索，输入内容时实时过滤列表数据，无匹配结果时显示“无对应账号信息”提示

- 分类筛选栏：默认选中“全部分类”，右侧带下拉箭头，展开后显示所有自定义分类（默认包含“未分类”，其余可由用户新增）；选中某分类后，列表仅展示该分类下的账号，切换分类时实时刷新列表

#### 3.2 账号列表区域

列表项布局（每一项包含以下元素）：

- 平台名称：居中显示，作为列表项主标题（如“微信、淘宝、企业微信”）

- 账号：显示部分隐藏内容，手机号格式为“138****1234”，邮箱格式为“xxxxx@163.com”，用户名按需隐藏中间字符

- 分类标签：显示在列表项右上角，小型标签样式，标注对应分类（如“社交、办公、金融”）

- 最后修改时间：显示在列表项底部，小字样式，格式为“2026-01-18”

列表交互：

- 点击列表项：进入账号详情页，展示完整账号和密码（密码默认隐藏，点击“眼睛图标”临时显示），详情页提供“复制账号”“复制密码”按钮，点击后提示“账号已复制”“密码已复制”

- 长按列表项：弹出操作菜单（包含“编辑”“删除”选项）；点击删除后，二次弹窗确认“确认删除该账号信息？删除后不可恢复”，确认后删除对应数据并刷新列表

- 排序功能：首页右上角设置“排序”按钮，点击后提供两个排序选项“按名称（升序/降序）”“按修改时间（最新/最早）”，选择后实时刷新列表排序

#### 3.3 分类管理入口

首页右上角设置“更多”按钮（⋮），点击后显示“分类管理”选项，跳转至分类管理页面（也可将该入口放在“我的”页面，二选一即可，需保持界面简洁）

### 模块4：新增/编辑账号密码

表单布局（推荐弹窗形式，也可跳转新页面，需适配手机屏幕尺寸）：

字段说明（按表单展示顺序排列）：

1) 平台名称：单行输入框，必填项，提示文字“请输入平台名称（如抖音、支付宝）”

2) 账号：单行输入框，必填项，提示文字“请输入账号（手机号/邮箱/用户名）”，支持输入任意字符

3) 密码：单行输入框，必填项，默认隐藏输入内容，搭配“眼睛图标”切换显示/隐藏，提示文字“请输入密码”

4) 分类：下拉选择框，非必填项，默认选中“未分类”，选项为所有自定义分类

5) 备注：多行输入框，非必填项，提示文字“可选：备注账号信息（如工作账号/常用密码）”，支持换行输入

6) 网址：单行输入框，非必填项，提示文字“可选：输入平台官网地址”，支持http/https前缀

核心功能：

- 随机密码生成：表单内添加“生成密码”按钮，点击后生成12位高强度密码（包含数字、大小写字母、特殊符号），自动填充至密码输入框，同时支持手动修改生成的密码

- 表单验证：点击“保存”按钮前，校验平台名称、账号、密码是否为空，任一为空则弹窗提示“请填写必填字段”，阻止保存

- 编辑逻辑：从列表长按“编辑”或详情页进入编辑模式时，自动加载该账号的所有原有数据，修改后覆盖本地存储的对应数据，保存成功后跳转回列表页并刷新数据

### 模块5：“我的”页面

页面布局：采用竖排卡片式功能列表，每个功能项为独立卡片，点击可进入对应功能页面，包含以下功能：

1) 修改解锁密码

- 流程：进入后先验证原解锁密码 → 验证通过后进入新密码设置页面（4/6位数字）→ 二次确认新密码 → 保存成功（加密覆盖原密码）→ 弹窗提示“密码修改成功”

- 说明：修改密码后，生物识别登录状态保留，仅数字密码登录凭证更新，无需重新开启生物识别

2) 分类管理

- 功能：支持新增、编辑、删除分类；新增分类需输入分类名称（不可为空，不可重复），编辑分类可修改名称，删除分类前弹窗提示“该分类下的账号将移至未分类，是否确认删除？”，确认后执行删除

- 展示：以列表形式显示所有分类，每个分类右侧搭配“编辑”“删除”按钮，操作便捷

3) 数据导出

- 格式：支持JSON和CSV两种格式，默认选中JSON格式，提供格式切换选项

- 流程：点击导出 → 验证当前解锁密码 → 弹出文件保存路径选择界面（默认手机本地存储根目录）→ 保存后提示“导出成功，文件名为：password_manager_YYYYMMDD.格式”（YYYYMMDD为导出日期）

- 加密要求：导出的文件需通过AES加密（密钥为用户解锁密码），防止文件被直接打开查看

4) 数据导入

- 流程：点击导入 → 验证解锁密码 → 跳转本地文件选择界面（仅显示JSON/CSV格式文件）→ 选择文件后，提示“请选择导入方式：覆盖现有数据/合并现有数据” → 导入完成后弹窗提示“成功导入X条账号信息”（X为实际导入数量）

- 容错处理：导入时校验文件格式和加密状态，格式错误、非本APP导出文件或解密失败时，弹窗提示“文件格式错误，请选择正确的导出文件”，终止导入

5) 生物识别设置

- 展示：开关按钮（默认开启），设备不支持生物识别则隐藏该功能项

- 逻辑：切换开关时需验证解锁密码；关闭后，登录界面不再显示生物识别登录按钮，仅保留数字密码登录；重新开启后，恢复生物识别登录选项

6) 关于我们

- 内容：展示APP版本号、开发信息、隐私政策（核心条款：“本APP所有数据仅存储在本地设备，无任何网络传输，保障数据安全”）

7) 退出登录

- 交互：点击后弹窗提示“确认退出登录？”，确认后清除登录状态，跳转回登录界面；取消则留在当前页面

8) 清除所有数据

- 高危操作：点击后先弹窗二次确认“清除所有数据将删除所有账号密码及设置，不可恢复，是否确认？”，确认后需验证解锁密码，验证通过后清空本地所有存储数据，跳转至密码设置页面

### 模块6：数据存储与安全（核心技术要求）

#### 6.1 存储方案

1) 解锁密码：存储于flutter_secure_storage，AES加密，密钥绑定设备唯一标识，防止迁移设备后解密

2) 账号密码数据：每条数据单独通过AES加密，存储于flutter_secure_storage，密钥为用户解锁密码

3) 分类列表、UI设置、登录状态：存储于shared_preferences，非敏感数据，无需加密

4) 导出文件：存储于手机本地文件系统，AES加密，密钥为用户解锁密码，导入时需匹配密钥解密

#### 6.2 核心依赖库（Flutter）

需引入以下依赖库，版本可选用最新稳定版：

- flutter_secure_storage（安全存储敏感数据）

- local_auth（生物识别功能）

- encrypt （AES加密解密）

- csv （CSV格式导入导出）

- shared_preferences（普通配置存储）

- path_provider （获取本地文件路径）

- permission_handler （申请文件访问、生物识别权限）

#### 6.3 权限配置

Android（AndroidManifest.xml）：

添加生物识别权限：<uses-permission android:name="android.permission.USE_BIOMETRIC" />

添加文件访问权限：<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />

<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

iOS（Info.plist）：

添加FaceID权限说明：<key>NSFaceIDUsageDescription</key>

<string>使用面容ID快速登录账号密码管理APP</string>

添加文件共享权限：<key>UIFileSharingEnabled</key>

<true/>

### 模块7：UI/交互通用要求

1) 适配范围：支持Android 8.0及以上版本、iOS 12.0及以上版本；适配手机横竖屏、不同尺寸屏幕（含全面屏、折叠屏）；兼容系统深色/浅色模式，跟随系统自动切换

2) 操作反馈：所有用户操作（保存、删除、导出、导入、复制等），均需通过Toast或SnackBar给出结果提示，提示文字简洁明确（如“保存成功”“删除失败”“密码已复制”）

3) 隐私保护：所有密码输入框默认隐藏内容，仅用户主动点击“眼睛图标”时临时显示；复制密码后，剪贴板内容建议在5分钟后自动清除（可选优化项）

4) 加载状态：数据导入/导出、列表刷新、生物识别验证时，显示加载动画（如CircularProgressIndicator），避免界面卡顿或用户重复操作

5) 主题风格：主色调建议选用蓝色系（#2196F3），整体风格简洁实用，无冗余装饰元素；按钮、输入框、弹窗等UI组件风格统一，交互逻辑一致

## 三、核心关键点总结

1) 安全优先：所有敏感数据（解锁密码、账号密码、导出文件）必须通过AES加密处理，全程无网络传输，杜绝数据泄露风险

2) 交互清晰：登录流程、分类管理、数据导入导出的逻辑需闭环，操作后必须给出明确反馈，降低用户使用成本

3) 兼容性：重点适配Android/iOS的生物识别权限、本地文件访问权限，确保核心功能在目标系统版本上正常运行

4) 数据可靠：本地存储需做好容错处理，防止APP崩溃导致数据丢失；导入导出功能需支持格式校验，避免错误数据影响使用